<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sakura Chronicles - Gacha RPG</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <script src="https://cdn.tailwindcss.com"></script>
    
    <link rel="stylesheet" href="styles.css">
</head>
<body class="bg-gradient-to-br from-pink-50 via-white to-pink-100 min-h-screen overflow-x-hidden">
    
    <div id="petals-container" class="petals-container"></div>
    
    <div id="app" class="relative z-10">
        
        <header class="glass-panel fixed top-0 left-0 right-0 z-50 border-b border-pink-200">
            <div class="container mx-auto px-4 py-4">
                <div class="flex items-center justify-between flex-wrap gap-4">
                    <div class="flex items-center gap-3">
                        <div class="text-4xl">ğŸŒ¸</div>
                        <h1 class="text-2xl md:text-3xl font-bold gradient-text">Sakura Chronicles</h1>
                    </div>
                    
                    <div class="flex gap-4 flex-wrap">
                        <div class="currency-display" title="Gold - Used for leveling heroes">
                            <span class="text-xl">ğŸ’°</span>
                            <span id="gold-display" class="font-semibold">0</span>
                        </div>
                        <div class="currency-display" title="Petals - Premium currency for summoning">
                            <span class="text-xl">ğŸŒ¸</span>
                            <span id="petals-display" class="font-semibold">0</span>
                        </div>
                        <div class="currency-display" title="Spirit Orbs - Used for skill tree">
                            <span class="text-xl">ğŸ”®</span>
                            <span id="orbs-display" class="font-semibold">0</span>
                        </div>
                    </div>
                </div>
            </div>
        </header>
        
        <nav class="fixed top-20 left-0 right-0 z-40 glass-panel border-b border-pink-200">
            <div class="container mx-auto px-4">
                <div class="flex gap-2 overflow-x-auto py-3">
                    <button class="nav-tab active" data-tab="battle">âš”ï¸ Battle</button>
                    <button class="nav-tab" data-tab="garden">ğŸµ Garden</button> <button class="nav-tab" data-tab="roster">ğŸ‘¥ Roster</button>
                    <button class="nav-tab" data-tab="gacha">ğŸ² Gacha</button>
                    <button class="nav-tab" data-tab="skill-tree">ğŸŒ³ Yggdrasil</button>
                    <button class="nav-tab" data-tab="expedition">ğŸ—ºï¸ Expedition</button>
                    <button class="nav-tab" data-tab="quests">ğŸ“œ Quests</button>
                </div>
            </div>
        </nav>
        
        <main class="container mx-auto px-4 pt-40 pb-8">
            
            <div id="battle-tab" class="tab-content active">
                <div class="battle-page-header-compact">
                    <h1 class="battle-main-title-compact">âš”ï¸ Battle Arena (Roguelike Mode)</h1>
                </div>

                <div class="battle-main-layout-new">
                    
                    <div class="battle-stats-sidebar">
                        <div class="battle-panel">
                            <div class="panel-header">
                                <span class="panel-icon">ğŸ“Š</span>
                                <h2 class="panel-title">Run Stats</h2>
                            </div>
                            <div class="panel-content">
                                <div class="stat-card-vertical">
                                    <div class="stat-icon-large">ğŸŒŠ</div>
                                    <div class="stat-label">Current Run</div>
                                    <div class="stat-value-large" id="wave-display-header">1</div>
                                </div>
                                <div class="stat-card-vertical">
                                    <div class="stat-icon-large">ğŸ†</div>
                                    <div class="stat-label">Best Record</div>
                                    <div class="stat-value-large" id="highest-wave-display">0</div>
                                </div>
                                <div class="stat-card-vertical">
                                    <div class="stat-icon-large">ğŸ’€</div>
                                    <div class="stat-label">Enemies Slain</div>
                                    <div class="stat-value-large" id="enemies-defeated-display">0</div>
                                </div>
                            </div>
                        </div>

                        <div class="battle-panel mt-4">
                            <div class="panel-header">
                                <span class="panel-icon">ğŸµ</span>
                                <h2 class="panel-title">Battle Items</h2>
                            </div>
                            <div class="panel-content">
                                <div id="battle-inventory" class="grid grid-cols-4 gap-2">
                                    </div>
                                <p class="text-xs text-slate-500 mt-2 text-center">Use items from your Garden to survive longer!</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="battle-sidebar">
                        <div class="battle-panel">
                            <div class="panel-header">
                                <span class="panel-icon">ğŸ‘¥</span>
                                <h2 class="panel-title">Your Team</h2>
                            </div>
                            <div class="panel-content">
                                <div id="team-selection" class="space-y-2"></div>
                            </div>
                        </div>
                        
                        <div class="battle-panel">
                            <div class="panel-header">
                                <span class="panel-icon">ğŸ®</span>
                                <h2 class="panel-title">Battle Controls</h2>
                            </div>
                            <div class="panel-content">
                                <div id="pre-run-controls">
                                    <button id="start-run-btn" class="btn btn-primary w-full mb-2">Start New Run (Wave 1)</button>
                                </div>
                                <div id="active-run-controls" class="hidden">
                                    <button id="next-wave-btn" class="btn btn-gold w-full mb-2 hidden">Next Wave</button>
                                    <button id="stop-battle-btn" class="btn btn-secondary w-full mb-2 hidden">Retreat (End Run)</button>
                                </div>
                                
                                <button id="auto-battle-toggle" class="btn btn-secondary w-full mt-2">Auto-Cast: OFF</button>
                            </div>
                        </div>
                    </div>
                    
                    <div class="battle-center">
                        <div class="battle-arena-container-light">
                            <div class="battle-wave-header-light">
                                <div class="wave-title-light">
                                    <span class="wave-icon-light">âš”ï¸</span>
                                    <span>Wave <span id="wave-display">1</span></span>
                                </div>
                                <div class="battle-status-light" id="battle-status">Ready to Start</div>
                            </div>
                            
                            <div class="battle-field-light">
                                <div class="battle-section-light hero-section-light">
                                    <div class="section-label-light">
                                        <span class="label-icon-light">ğŸ›¡ï¸</span>
                                        <span>Your Heroes</span>
                                    </div>
                                    <div id="battle-heroes" class="battle-units-grid"></div>
                                </div>
                                
                                <div class="battle-divider-light">
                                    <div class="vs-circle-light">
                                        <span class="vs-text-light">VS</span>
                                    </div>
                                </div>
                                
                                <div class="battle-section-light enemy-section-light">
                                    <div class="section-label-light enemy-label-light">
                                        <span class="label-icon-light">ğŸ’€</span>
                                        <span>Enemies</span>
                                    </div>
                                    <div id="battle-enemies" class="battle-units-grid"></div>
                                </div>
                            </div>
                            
                            <div class="battle-log-container-light">
                                <div class="battle-log-header-light">
                                    <span class="text-lg">ğŸ“œ</span>
                                    <span class="font-semibold">Combat Log</span>
                                </div>
                                <div id="battle-log" class="battle-log-light"></div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="battle-sidebar">
                        <div class="battle-panel">
                            <div class="panel-header">
                                <span class="panel-icon">âœ¨</span>
                                <h2 class="panel-title">Ultimate Abilities</h2>
                            </div>
                            <div class="panel-content">
                                <p class="panel-description">Click on glowing abilities to cast them manually, or enable Auto-Cast.</p>
                                <div id="ultimate-abilities-grid" class="ultimate-abilities-stack"></div>
                            </div>
                        </div>
                    </div>
                    
                </div>
            </div>

            <div id="garden-tab" class="tab-content">
                <div class="max-w-6xl mx-auto">
                    <div class="battle-page-header-compact bg-green-50 border-green-200">
                        <h1 class="battle-main-title-compact text-green-700">ğŸµ Sakura Spirit Garden</h1>
                        <p class="text-slate-600">Plant seeds found in battle to brew powerful teas for your next run!</p>
                    </div>

                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                        <div class="lg:col-span-1 space-y-4">
                            <div class="glass-panel p-4">
                                <h3 class="font-bold text-lg mb-3 flex items-center gap-2">
                                    <span>ğŸŒ±</span> Seed Pouch
                                </h3>
                                <div id="seed-inventory" class="grid grid-cols-4 gap-2">
                                    </div>
                            </div>

                            <div class="glass-panel p-4">
                                <h3 class="font-bold text-lg mb-3 flex items-center gap-2">
                                    <span>ğŸµ</span> Brewed Teas
                                </h3>
                                <div id="tea-inventory" class="grid grid-cols-4 gap-2">
                                    </div>
                            </div>
                        </div>

                        <div class="lg:col-span-2">
                            <div class="glass-panel p-6">
                                <div class="flex justify-between items-center mb-4">
                                    <h3 class="font-bold text-xl">Garden Plots</h3>
                                    <button id="buy-plot-btn" class="btn btn-secondary text-sm">
                                        Unlock Plot (5000 Gold)
                                    </button>
                                </div>
                                
                                <div id="garden-plots" class="grid grid-cols-2 md:grid-cols-3 gap-4">
                                    </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div id="roster-tab" class="tab-content">
                <div class="glass-panel p-6">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="section-title">Hero Roster</h2>
                        <div class="flex gap-2">
                            <select id="roster-sort" class="filter-select">
                                <option value="rarity">Sort: Rarity</option>
                                <option value="level">Sort: Level</option>
                                <option value="team">Sort: Team First â­</option>
                            </select>
                            <select id="roster-filter-rarity" class="filter-select">
                                <option value="all">All Rarities</option>
                                <option value="N">Normal</option>
                                <option value="R">Rare</option>
                                <option value="SR">Super Rare</option>
                                <option value="SSR">SSR</option>
                                <option value="UR">Ultra Rare</option>
                            </select>
                            <select id="roster-filter-element" class="filter-select">
                                <option value="all">All Elements</option>
                                <option value="Fire">ğŸ”¥ Fire</option>
                                <option value="Water">ğŸ’§ Water</option>
                                <option value="Wind">ğŸŒªï¸ Wind</option>
                                <option value="Light">âœ¨ Light</option>
                                <option value="Dark">ğŸŒ‘ Dark</option>
                            </select>
                        </div>
                    </div>
                    <div id="roster-grid" class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4"></div>
                </div>
            </div>
            
            <div id="gacha-tab" class="tab-content">
                <div class="max-w-4xl mx-auto space-y-6">
                    
                    <div class="glass-panel p-6">
                        <h2 class="section-title mb-4">ğŸŒ¸ Summoning Shrine</h2>
                        <div class="bg-pink-50 border border-pink-200 rounded-lg p-4 mb-4">
                            <h3 class="font-semibold mb-2">How Gacha Works:</h3>
                            <ul class="text-sm space-y-1 text-slate-700">
                                <li>â€¢ Spend <strong>Petals (ğŸŒ¸)</strong> to summon heroes</li>
                                <li>â€¢ <strong>1-Pull</strong>: 10 Petals | <strong>10-Pull</strong>: 100 Petals</li>
                                <li>â€¢ Rarities: N (60%), R (25%), SR (10%), SSR (4.5%), UR (0.5%)</li>
                                <li>â€¢ <strong>Pity System:</strong> Guaranteed SSR after 50 pulls without one</li>
                                <li>â€¢ <strong>Duplicates</strong> convert to Awakening Shards for that hero</li>
                            </ul>
                        </div>
                        
                        <div class="text-center mb-4">
                            <div class="text-sm text-slate-600 mb-2">Pulls until Pity:</div>
                            <div id="pity-counter" class="text-3xl font-bold gradient-text">50</div>
                        </div>
                        
                        <div class="flex gap-4 justify-center">
                            <button id="pull-1-btn" class="btn btn-primary">
                                <span class="text-lg">ğŸŒ¸</span>
                                <span>1-Pull</span>
                                <span class="text-xs">(10 Petals)</span>
                            </button>
                            <button id="pull-10-btn" class="btn btn-gold">
                                <span class="text-lg">ğŸŒ¸</span>
                                <span>10-Pull</span>
                                <span class="text-xs">(100 Petals)</span>
                            </button>
                        </div>
                    </div>
                    
                    <div id="gacha-animation" class="hidden"></div>
                    
                    <div id="gacha-results" class="hidden"></div>
                    
                </div>
            </div>
            
            <div id="skill-tree-tab" class="tab-content">
                <div class="glass-panel p-6">
                    <h2 class="section-title mb-4">ğŸŒ³ Yggdrasil - The World Tree</h2>
                    <div class="bg-pink-50 border border-pink-200 rounded-lg p-4 mb-6">
                        <p class="text-sm text-slate-700">
                            Spend <strong>Spirit Orbs (ğŸ”®)</strong> to unlock permanent passive bonuses for all your heroes. 
                            These upgrades persist forever and make your entire team stronger!
                        </p>
                    </div>
                    <div id="skill-tree-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"></div>
                </div>
            </div>
            
            <div id="expedition-tab" class="tab-content">
                <div class="max-w-2xl mx-auto glass-panel p-6">
                    <h2 class="section-title mb-4">ğŸ—ºï¸ Expedition</h2>
                    <div class="bg-pink-50 border border-pink-200 rounded-lg p-4 mb-6">
                        <p class="text-sm text-slate-700">
                            Send your heroes on expeditions! They will gather resources while you're away. 
                            Rewards accumulate even when the game is closed.
                        </p>
                    </div>
                    
                    <div class="space-y-4">
                        <div class="border border-pink-200 rounded-lg p-4">
                            <h3 class="font-semibold mb-2">Current Expedition</h3>
                            <div id="expedition-status" class="text-sm text-slate-700"></div>
                            <div class="mt-4">
                                <button id="claim-expedition-btn" class="btn btn-primary w-full" disabled>
                                    Claim Rewards
                                </button>
                            </div>
                        </div>
                        
                        <div id="expedition-rewards" class="hidden"></div>
                    </div>
                </div>
            </div>
            
            <div id="quests-tab" class="tab-content">
                <div class="max-w-3xl mx-auto glass-panel p-6">
                    <h2 class="section-title mb-4">ğŸ“œ Daily Quests</h2>
                    <div class="bg-pink-50 border border-pink-200 rounded-lg p-4 mb-6">
                        <p class="text-sm text-slate-700">
                            Complete daily quests to earn <strong>Petals</strong> and other rewards! 
                            Quests reset every day at midnight.
                        </p>
                    </div>
                    <div id="quests-list" class="space-y-3"></div>
                </div>
            </div>
            
        </main>
        
    </div>
    
    <div id="hero-modal" class="modal">
        <div class="modal-content">
            <button class="modal-close">&times;</button>
            <div id="hero-detail"></div>
        </div>
    </div>
    
    <script src="utils.js"></script>
    <script src="data.js"></script>
    <script src="classes.js"></script>
    <script src="storage.js"></script>
    <script src="gacha.js"></script>
    <script src="battle.js"></script>
    <script src="garden.js"></script> <script src="skillTree.js"></script>
    <script src="ui.js"></script>
    <script src="main.js"></script>
    
</body>
</html>