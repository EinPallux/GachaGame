<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sakura Chronicles - Gacha RPG</title>
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Custom Styles -->
    <link rel="stylesheet" href="styles.css">
</head>
<body class="bg-gradient-to-br from-pink-50 via-white to-pink-100 min-h-screen overflow-x-hidden">
    
    <!-- Cherry Blossom Petals Animation Background -->
    <div id="petals-container" class="petals-container"></div>
    
    <!-- Main Game Container -->
    <div id="app" class="relative z-10">
        
        <!-- Header -->
        <header class="glass-panel fixed top-0 left-0 right-0 z-50 border-b border-pink-200">
            <div class="container mx-auto px-4 py-4">
                <div class="flex items-center justify-between flex-wrap gap-4">
                    <!-- Logo -->
                    <div class="flex items-center gap-3">
                        <div class="text-4xl">ğŸŒ¸</div>
                        <h1 class="text-2xl md:text-3xl font-bold gradient-text">Sakura Chronicles</h1>
                    </div>
                    
                    <!-- Currency Display -->
                    <div class="flex gap-4 flex-wrap">
                        <div class="currency-display" title="Gold - Used for leveling heroes">
                            <span class="text-xl">ğŸ’°</span>
                            <span id="gold-display" class="font-semibold">0</span>
                        </div>
                        <div class="currency-display" title="Petals - Premium currency for summoning">
                            <span class="text-xl">ğŸŒ¸</span>
                            <span id="petals-display" class="font-semibold">0</span>
                        </div>
                        <div class="currency-display" title="Spirit Orbs - Used for skill tree">
                            <span class="text-xl">ğŸ”®</span>
                            <span id="orbs-display" class="font-semibold">0</span>
                        </div>
                    </div>
                </div>
            </div>
        </header>
        
        <!-- Navigation Tabs -->
        <nav class="fixed top-20 left-0 right-0 z-40 glass-panel border-b border-pink-200">
            <div class="container mx-auto px-4">
                <div class="flex gap-2 overflow-x-auto py-3">
                    <button class="nav-tab active" data-tab="battle">âš”ï¸ Battle</button>
                    <button class="nav-tab" data-tab="roster">ğŸ‘¥ Roster</button>
                    <button class="nav-tab" data-tab="gacha">ğŸ² Gacha</button>
                    <button class="nav-tab" data-tab="skill-tree">ğŸŒ³ Yggdrasil</button>
                    <button class="nav-tab" data-tab="expedition">ğŸ—ºï¸ Expedition</button>
                    <button class="nav-tab" data-tab="quests">ğŸ“œ Quests</button>
                </div>
            </div>
        </nav>
        
        <!-- Main Content Area -->
        <main class="container mx-auto px-4 pt-40 pb-8">
            
            <!-- Battle Tab -->
            <div id="battle-tab" class="tab-content active">
                <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                    
                    <!-- Team Selection & Battle Controls -->
                    <div class="lg:col-span-1 space-y-4">
                        <div class="glass-panel p-6">
                            <h2 class="section-title">Your Team</h2>
                            <div id="team-selection" class="space-y-2"></div>
                            <div class="mt-4 space-y-2">
                                <button id="start-battle-btn" class="btn btn-primary w-full">Start Battle</button>
                                <button id="auto-battle-toggle" class="btn btn-secondary w-full">Auto-Cast: OFF</button>
                            </div>
                        </div>
                        
                        <div class="glass-panel p-6">
                            <h3 class="text-lg font-semibold mb-3">Battle Info</h3>
                            <div class="space-y-2 text-sm">
                                <div class="flex justify-between">
                                    <span class="text-slate-600">Current Wave:</span>
                                    <span id="wave-display" class="font-semibold">0</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-slate-600">Highest Wave:</span>
                                    <span id="highest-wave-display" class="font-semibold">0</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-slate-600">Enemies Defeated:</span>
                                    <span id="enemies-defeated-display" class="font-semibold">0</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Battle Arena -->
                    <div class="lg:col-span-2">
                        <div class="glass-panel p-6">
                            <h2 class="section-title mb-6">Battle Arena</h2>
                            
                            <!-- Heroes -->
                            <div class="mb-8">
                                <h3 class="text-sm font-semibold text-slate-600 mb-3">Your Heroes</h3>
                                <div id="battle-heroes" class="grid grid-cols-5 gap-2"></div>
                            </div>
                            
                            <!-- Battle Log -->
                            <div id="battle-log" class="battle-log mb-6"></div>
                            
                            <!-- Enemies -->
                            <div>
                                <h3 class="text-sm font-semibold text-slate-600 mb-3">Enemies</h3>
                                <div id="battle-enemies" class="grid grid-cols-5 gap-2"></div>
                            </div>
                        </div>
                    </div>
                    
                </div>
            </div>
            
            <!-- Roster Tab -->
            <div id="roster-tab" class="tab-content">
                <div class="glass-panel p-6">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="section-title">Hero Roster</h2>
                        <div class="flex gap-2">
                            <select id="roster-filter-rarity" class="filter-select">
                                <option value="all">All Rarities</option>
                                <option value="N">Normal</option>
                                <option value="R">Rare</option>
                                <option value="SR">Super Rare</option>
                                <option value="SSR">SSR</option>
                                <option value="UR">Ultra Rare</option>
                            </select>
                            <select id="roster-filter-element" class="filter-select">
                                <option value="all">All Elements</option>
                                <option value="Fire">ğŸ”¥ Fire</option>
                                <option value="Water">ğŸ’§ Water</option>
                                <option value="Wind">ğŸŒªï¸ Wind</option>
                                <option value="Light">âœ¨ Light</option>
                                <option value="Dark">ğŸŒ‘ Dark</option>
                            </select>
                        </div>
                    </div>
                    <div id="roster-grid" class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4"></div>
                </div>
            </div>
            
            <!-- Gacha Tab -->
            <div id="gacha-tab" class="tab-content">
                <div class="max-w-4xl mx-auto space-y-6">
                    
                    <!-- Gacha Info Panel -->
                    <div class="glass-panel p-6">
                        <h2 class="section-title mb-4">ğŸŒ¸ Summoning Shrine</h2>
                        <div class="bg-pink-50 border border-pink-200 rounded-lg p-4 mb-4">
                            <h3 class="font-semibold mb-2">How Gacha Works:</h3>
                            <ul class="text-sm space-y-1 text-slate-700">
                                <li>â€¢ Spend <strong>Petals (ğŸŒ¸)</strong> to summon heroes</li>
                                <li>â€¢ <strong>1-Pull</strong>: 10 Petals | <strong>10-Pull</strong>: 100 Petals</li>
                                <li>â€¢ Rarities: N (60%), R (25%), SR (10%), SSR (4.5%), UR (0.5%)</li>
                                <li>â€¢ <strong>Pity System:</strong> Guaranteed SSR after 50 pulls without one</li>
                                <li>â€¢ <strong>Duplicates</strong> convert to Awakening Shards for that hero</li>
                            </ul>
                        </div>
                        
                        <div class="text-center mb-4">
                            <div class="text-sm text-slate-600 mb-2">Pulls until Pity:</div>
                            <div id="pity-counter" class="text-3xl font-bold gradient-text">50</div>
                        </div>
                        
                        <div class="flex gap-4 justify-center">
                            <button id="pull-1-btn" class="btn btn-primary">
                                <span class="text-lg">ğŸŒ¸</span>
                                <span>1-Pull</span>
                                <span class="text-xs">(10 Petals)</span>
                            </button>
                            <button id="pull-10-btn" class="btn btn-gold">
                                <span class="text-lg">ğŸŒ¸</span>
                                <span>10-Pull</span>
                                <span class="text-xs">(100 Petals)</span>
                            </button>
                        </div>
                    </div>
                    
                    <!-- Gacha Animation Container -->
                    <div id="gacha-animation" class="hidden"></div>
                    
                    <!-- Gacha Results -->
                    <div id="gacha-results" class="hidden"></div>
                    
                </div>
            </div>
            
            <!-- Skill Tree Tab -->
            <div id="skill-tree-tab" class="tab-content">
                <div class="glass-panel p-6">
                    <h2 class="section-title mb-4">ğŸŒ³ Yggdrasil - The World Tree</h2>
                    <div class="bg-pink-50 border border-pink-200 rounded-lg p-4 mb-6">
                        <p class="text-sm text-slate-700">
                            Spend <strong>Spirit Orbs (ğŸ”®)</strong> to unlock permanent passive bonuses for all your heroes. 
                            These upgrades persist forever and make your entire team stronger!
                        </p>
                    </div>
                    <div id="skill-tree-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"></div>
                </div>
            </div>
            
            <!-- Expedition Tab -->
            <div id="expedition-tab" class="tab-content">
                <div class="max-w-2xl mx-auto glass-panel p-6">
                    <h2 class="section-title mb-4">ğŸ—ºï¸ Expedition</h2>
                    <div class="bg-pink-50 border border-pink-200 rounded-lg p-4 mb-6">
                        <p class="text-sm text-slate-700">
                            Send your heroes on expeditions! They will gather resources while you're away. 
                            Rewards accumulate even when the game is closed.
                        </p>
                    </div>
                    
                    <div class="space-y-4">
                        <div class="border border-pink-200 rounded-lg p-4">
                            <h3 class="font-semibold mb-2">Current Expedition</h3>
                            <div id="expedition-status" class="text-sm text-slate-700"></div>
                            <div class="mt-4">
                                <button id="claim-expedition-btn" class="btn btn-primary w-full" disabled>
                                    Claim Rewards
                                </button>
                            </div>
                        </div>
                        
                        <div id="expedition-rewards" class="hidden"></div>
                    </div>
                </div>
            </div>
            
            <!-- Quests Tab -->
            <div id="quests-tab" class="tab-content">
                <div class="max-w-3xl mx-auto glass-panel p-6">
                    <h2 class="section-title mb-4">ğŸ“œ Daily Quests</h2>
                    <div class="bg-pink-50 border border-pink-200 rounded-lg p-4 mb-6">
                        <p class="text-sm text-slate-700">
                            Complete daily quests to earn <strong>Petals</strong> and other rewards! 
                            Quests reset every day at midnight.
                        </p>
                    </div>
                    <div id="quests-list" class="space-y-3"></div>
                </div>
            </div>
            
        </main>
        
    </div>
    
    <!-- Hero Detail Modal -->
    <div id="hero-modal" class="modal">
        <div class="modal-content">
            <button class="modal-close">&times;</button>
            <div id="hero-detail"></div>
        </div>
    </div>
    
    <!-- Scripts -->
    <script src="utils.js"></script>
    <script src="data.js"></script>
    <script src="classes.js"></script>
    <script src="storage.js"></script>
    <script src="gacha.js"></script>
    <script src="battle.js"></script>
    <script src="skillTree.js"></script>
    <script src="ui.js"></script>
    <script src="main.js"></script>
    
</body>
</html>
